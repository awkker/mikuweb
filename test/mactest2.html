<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»¿ macOS ç¥ç¯å¸å…¥æ•ˆæœ</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: url('https://images.unsplash.com/photo-1477346611705-65d1883cee1e?q=80&w=2940&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            overflow: hidden;
            font-family: sans-serif;
        }

        /* --- æ¨¡æ‹Ÿçš„ Dock æ  --- */
        .dock {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            padding: 10px 20px;
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .dock-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .dock-icon:hover { transform: scale(1.1) translateY(-5px); }

        /* æ ‡è®°è¿™æ˜¯ç›®æ ‡çš„ icon */
        #target-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }
        /* æ ‡è®° icon ä¸‹æ–¹çš„å°é»‘ç‚¹ (è¡¨ç¤ºè¿è¡Œä¸­) */
        #target-icon::after {
            content: ''; display: block; width: 4px; height: 4px; background: rgba(255,255,255,0.6);
            border-radius: 50%; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
        }

        /* --- å¯æ‹–æ‹½çš„çª—å£ --- */
        #window {
            width: 400px;
            height: 300px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            position: absolute;
            top: 20%; left: 30%; /* åˆå§‹ä½ç½® */
            overflow: hidden;
            display: flex;
            flex-direction: column;

            /* ğŸŒŸ æ ¸å¿ƒï¼šä¸ºåŠ¨ç”»åšå‡†å¤‡ */
            transition: transform 0.6s cubic-bezier(0.55, 0.055, 0.675, 0.19),
            opacity 0.6s ease;
            /* è¿™ä¸€å¥ cubic-bezier æ˜¯æ¨¡æ‹Ÿâ€œè¶Šå¸è¶Šå¿«â€çš„é‡åŠ›æ„Ÿ */
        }

        /* çª—å£æ ‡é¢˜æ  */
        .title-bar {
            height: 36px;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            padding: 0 10px;
            cursor: grab; /* æŠ“æ‰‹å…‰æ ‡ */
        }
        .title-bar:active { cursor: grabbing; }

        /* çº¢ç»¿ç¯æŒ‰é’® */
        .traffic-lights { display: flex; gap: 6px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .close { background: #ff5f56; }
        .minimize { background: #ffbd2e; cursor: pointer; } /* é»„è‰²æœ€å°åŒ– */
        .maximize { background: #27c93f; }

        .content {
            padding: 20px;
            flex: 1;
            color: #333;
        }

        /* --- æœ€å°åŒ–çŠ¶æ€ (è¢«å¸å…¥) --- */
        .sucked-in {
            /* 1. å˜æˆå…¨é€æ˜ */
            opacity: 0;
            /* 2. è¿™é‡Œçš„ transform ä¼šç»“åˆ JS åŠ¨æ€è®¡ç®—çš„ origin ç”Ÿæ•ˆ */
            transform: scale(0) translateY(200px);
            /* æ³¨æ„ï¼štranslateY æ˜¯ä¸ºäº†è®©å®ƒæœ‰ä¸€ç§å‘ä¸‹æµåŠ¨çš„è¶‹åŠ¿ */
        }
    </style>
</head>
<body>

<div id="window">
    <div class="title-bar" id="drag-handle">
        <div class="traffic-lights">
            <div class="dot close"></div>
            <div class="dot minimize" onclick="suckWindow()"></div> <div class="dot maximize"></div>
        </div>
    </div>
    <div class="content">
        <h2>Genie Effect ğŸ§â€â™‚ï¸</h2>
        <p>ç‚¹å‡»ä¸Šæ–¹é»„è‰²çš„æŒ‰é’®ï¼Œçœ‹çœ‹æˆ‘ä¼šå»å“ªé‡Œï¼</p>
        <p>è¿˜å¯ä»¥æ‹–åŠ¨æˆ‘æ¢ä¸ªä½ç½®å†è¯•å“¦ã€‚</p>
    </div>
</div>

<div class="dock">
    <div class="dock-icon"></div>
    <div class="dock-icon"></div>
    <div class="dock-icon" id="target-icon" onclick="restoreWindow()"></div> <div class="dock-icon"></div>
</div>

<script>
    const win = document.getElementById('window');
    const targetIcon = document.getElementById('target-icon');
    let isMinimized = false;

    // --- æ ¸å¿ƒåŠŸèƒ½ï¼šç¥ç¯å¸å…¥ ---
    function suckWindow() {
        if (isMinimized) return;

        // 1. è·å–çª—å£å’Œå›¾æ ‡çš„ä½ç½®ä¿¡æ¯ (getBoundingClientRect æ˜¯ç¥å™¨)
        const winRect = win.getBoundingClientRect();
        const iconRect = targetIcon.getBoundingClientRect();

        // 2. è®¡ç®—å›¾æ ‡ä¸­å¿ƒç‚¹ç›¸å¯¹äºçª—å£å·¦ä¸Šè§’çš„åæ ‡
        // è¿™æ˜¯ä¸ºäº†ç¡®å®š transform-origin (å˜å½¢æ”¯ç‚¹) åº”è¯¥åœ¨å“ªé‡Œ
        const iconCenterX = iconRect.left + iconRect.width / 2;
        const iconCenterY = iconRect.top + iconRect.height / 2;

        // 3. è®¡ç®—ç›¸å¯¹ä½ç§»
        // æˆ‘ä»¬éœ€è¦æŠŠå˜æ¢åŸç‚¹è®¾ç½®åˆ° Dock å›¾æ ‡çš„ä½ç½®ã€‚
        // ä¹Ÿå°±æ˜¯ï¼šå›¾æ ‡ä¸­å¿ƒX - çª—å£å½“å‰X
        const originX = iconCenterX - winRect.left;
        const originY = iconCenterY - winRect.top;

        // 4. åº”ç”¨æ ·å¼
        // è¿™ä¸€æ­¥æ˜¯é­”æ³•çš„å…³é”®ï¼šåŠ¨æ€æ”¹å˜åŸç‚¹ï¼
        win.style.transformOrigin = `${originX}px ${originY}px`;

        // 5. è§¦å‘åŠ¨ç”»
        win.classList.add('sucked-in');
        isMinimized = true;
    }

    // --- æ¢å¤çª—å£ ---
    function restoreWindow() {
        if (!isMinimized) return;
        win.classList.remove('sucked-in');
        isMinimized = false;
    }

    // --- é™„èµ ï¼šç®€å•çš„æ‹–æ‹½é€»è¾‘ (ä¸ºäº†æµ‹è¯•ä¸åŒä½ç½®çš„å¸å…¥) ---
    const handle = document.getElementById('drag-handle');
    let isDragging = false;
    let startX, startY, initialLeft, initialTop;

    handle.addEventListener('mousedown', (e) => {
        if (isMinimized) return;
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        initialLeft = win.offsetLeft;
        initialTop = win.offsetTop;
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
    });

    function onMouseMove(e) {
        if (!isDragging) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        win.style.left = `${initialLeft + dx}px`;
        win.style.top = `${initialTop + dy}px`;
    }

    function onMouseUp() {
        isDragging = false;
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
    }
</script>
</body>
</html>