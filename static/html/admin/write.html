<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miku Writer (Embed)</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-light.min.css">
    <link rel="stylesheet" href="../../css/write.css">
</head>
<body>

    <script>
        if (!localStorage.getItem('auth_token')) {
            alert('请先登录喵~(T_T)');
            window.location.href = '../main.html';
        }
    </script>

    <div class="main-container" id="mainContainer">
        
        <div class="pane preview-pane markdown-body" id="preview">
            <div style="color:#aaa; text-align:center; margin-top:40px; opacity: 0.6;">
                <p>实时预览区域</p>
            </div>
        </div>

        <div class="pane editor-pane">
            <div class="meta-inputs">
                <div class="input-group">
                    <input type="text" id="title" placeholder="文章标题..." autocomplete="off">
                </div>
                <div class="input-group">
                    <input type="text" id="summary" placeholder="简短摘要..." autocomplete="off">
                </div>
                <div class="input-group">
                    <input type="text" id="cover" placeholder="封面图 URL(可选)" autocomplete="off">
                </div>
            </div>

            <div class="toolbar">
                <button class="tool-btn" onclick="insertMD('**', '**')" title="加粗"><i class="fa-solid fa-bold"></i></button>
                <button class="tool-btn" onclick="insertMD('*', '*')" title="斜体"><i class="fa-solid fa-italic"></i></button>
                <button class="tool-btn" onclick="insertMD('## ', '')" title="标题"><i class="fa-solid fa-heading"></i></button>
                <button class="tool-btn" onclick="insertMD('> ', '')" title="引用"><i class="fa-solid fa-quote-left"></i></button>
                <button class="tool-btn" onclick="insertMD('- ', '')" title="列表"><i class="fa-solid fa-list-ul"></i></button>
                <button class="tool-btn" onclick="insertMD('[', '](url)')" title="链接"><i class="fa-solid fa-link"></i></button>
                <button class="tool-btn" onclick="insertMD('![alt](', ')')" title="图片"><i class="fa-regular fa-image"></i></button>
                <button class="tool-btn" onclick="insertMD('```\n', '\n```')" title="代码"><i class="fa-solid fa-code"></i></button>

                <div class="toolbar-right">
                    <button class="tool-btn" onclick="togglePreview()" id="eyeBtn" title="切换预览">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                    <button class="tool-btn publish-tool" onclick="publish()" id="publishBtn" title="发布文章">
                        <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <div class="editor-wrapper">
                <textarea id="content" placeholder="开始创作"></textarea>
            </div>
        </div>

    </div>

    <script src="../../js/write.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>
</html>