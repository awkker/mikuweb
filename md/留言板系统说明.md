# 留言板系统说明

## 概述

基于 Go + SQLite 后端的留言板系统，支持发表评论、删除评论、显示用户设备信息和位置，前端采用模仿常见博客评论区的粉色系设计风格。

## 文件结构

```
├── comments/
│   ├── main.go           # Go 后端服务
│   ├── comments.db       # SQLite 数据库
│   ├── go.mod
│   └── go.sum
└── static/
    ├── css/
    │   └── comment/
    │       ├── index.css         # 主入口（导入其他CSS）
    │       ├── layout.css        # 布局样式
    │       ├── comment-card.css  # 评论卡片样式
    │       ├── form.css          # 表单样式
    │       ├── tags.css          # 标签样式（博主/等级）
    │       ├── responsive.css    # 响应式适配
    │       └── dark-mode.css     # 深色模式
    ├── html/
    │   └── comment.html          # 留言板页面
    └── js/
        └── comment.js            # 前端交互逻辑
```

## 布局说明

### 整体结构

```
┌─────────────────────────────────────────────────────┐
│              Comments    2条评论                     │
├─────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────┐   │
│  │  ✨ 发表你的想法                              │   │
│  │  ┌────────────┐                              │   │
│  │  │ 昵称输入框  │                              │   │
│  │  └────────────┘                              │   │
│  │  ┌────────────────────────────────────────┐  │   │
│  │  │ 内容输入框                              │  │   │
│  │  └────────────────────────────────────────┘  │   │
│  │  😊 😂 🥰 ... （表情选择器）                  │   │
│  │                              [发表评论]      │   │
│  └──────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────┐   │
│  │ (头像)  [博主] 用户名 [LV5]                   │   │
│  │         发布于 2025-07-22 14:31              │   │
│  │         🌐 Chrome 138  🪟 Windows 10/11      │   │
│  │         来自: 中国 山东 济南市  ✏️ Edit       │   │
│  │                                              │   │
│  │         评论内容...                           │   │
│  └──────────────────────────────────────────────┘   │
│  ┌──────────────────────────────────────────────┐   │
│  │         ... 更多评论 ...                      │   │
│  └──────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

## 后端 API

### 数据模型

```go
type Comment struct {
    ID        uint      `json:"id"`
    Content   string    `json:"content"`
    Nickname  string    `json:"nickname"`
    IP        string    `json:"ip"`
    UserAgent string    `json:"user_agent"`
    Location  string    `json:"location"`
    CreatedAt time.Time `json:"created_at"`
}
```

### API 接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/comments` | 获取所有评论（按时间倒序） |
| POST | `/comments` | 发表新评论 |
| DELETE | `/comments/:id` | 删除指定评论 |

### 启动服务

```bash
cd comments
go run main.go
# 服务启动: http://localhost:8080
```

## 前端功能

### 评论卡片信息

| 元素 | 说明 |
|------|------|
| 头像 | 显示昵称首字母占位 |
| 博主标签 | 绿色，当昵称为 `awkker` 时显示 |
| 发布时间 | 格式：`YYYY-MM-DD HH:mm` |
| 浏览器 | 解析 User-Agent，显示浏览器名和版本 |
| 操作系统 | 解析 User-Agent，显示系统名称 |
| 位置 | 后端记录的位置信息 |

### 表情选择器

支持快速插入表情：
```javascript
const EMOJI_LIST = [
    '😊', '😂', '🥰', '😍', '🤔', '😅', '😢', '😭',
    '👍', '👏', '❤️', '🎉', '✨', '🌸', '🎵', '☕'
];
```

### 交互效果

| 交互 | 效果 |
|------|------|
| 卡片悬停 | 背景变亮 + 阴影增强 |
| 表情按钮悬停 | 放大效果 |
| 提交按钮悬停 | 上浮 + 阴影增强 |
| 输入框聚焦 | 边框变粉色 + 外发光 |

### 响应式设计

| 屏幕宽度 | 布局变化 |
|---------|----------|
| 桌面端 (>768px) | 正常两列布局 |
| 平板端 (≤768px) | 卡片改为纵向排列 |
| 手机端 (≤480px) | 标题缩小，按钮全宽 |

## 使用指南

### 引入页面

```html
<!-- CSS -->
<link rel="stylesheet" href="../css/comment/index.css">

<!-- HTML 结构 -->
<div class="comment-container">
    <div class="comment-header">
        <h1 class="comment-title">Comments</h1>
        <span class="comment-count" id="comment-count">0 条评论</span>
    </div>
    <div class="comment-form-container">
        <form class="comment-form" id="comment-form">
            <!-- 表单内容 -->
        </form>
    </div>
    <div class="comment-list" id="comment-list"></div>
</div>

<!-- JavaScript -->
<script src="../js/comment.js"></script>
```

### 自定义博主标识

修改 `comment.js` 中的配置：

```javascript
const AUTHOR_NICKNAME = 'awkker';  // 改为你的昵称
```

### 修改 API 地址

```javascript
const API_BASE = 'http://localhost:8080';  // 改为你的后端地址
```

## 深色模式

通过 `body.dark-mode` 类控制，与项目其他页面保持一致：

- 卡片背景：`rgba(40, 40, 40, 0.85)`
- 文字颜色：自动调整为浅色
- 输入框背景：深灰色

## 注意事项

1. **跨域配置** - 后端已配置 CORS 允许所有来源
2. **位置获取** - 当前为模拟数据，实际部署需接入 GeoIP 服务
3. **默认昵称** - 不填写昵称时默认为「神秘路人」
4. **字数限制** - 评论内容最多 1000 字

